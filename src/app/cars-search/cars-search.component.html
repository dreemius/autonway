<div class="row pl-5 pr-5 pt-5 pb-2">
  <div class="col-md-3"> </div>
  <div class="col-md-6">

    <form #searchForm="ngForm" autocomplete="off" (ngSubmit)="onSearch(searchForm)">
      <div class="input-group mb-4" *ngIf="type">
        <label for="country">Тип кузова</label>
        <select class="custom-select d-block w-100" [(ngModel)]="selectedType" id="type" name="type" required>
          <option *ngFor="let item of type; let i = index" [value]=item.value>{{item.name}}
          </option>
        </select>
        <div class="invalid-feedback">
          Пожалуйста, выберите тип кузова
        </div>
      </div>

      <!-- <div class="input-group  mb-4">
        <label for="brand">Марка авто</label>
        <select class="custom-select d-block w-100" [(ngModel)]="selectedBrand" id="brand" name="brand" required
          (change)="onBrandChanged($event)">
          <option *ngFor="let item of brand" [value]=item.value>{{item.name}}</option>
        </select>
        <div class="invalid-feedback">
          Пожалуйста, выберите марку авто
        </div>
      </div> -->

      <div class="input-group  mb-4">
        <label for="state">Марка авто</label><br>
        <div class="autocompleter">
          <ng-autocomplete 
            [data]="brand"
            [searchKeyword]="keyword"
            placeHolder="Выберите марку машины"
            (selected)='onBrandChanged($event)'
            historyIdentifier="brand"
            historyListMaxNumber="10"
            [itemTemplate]="itemTemplate"
            [notFoundTemplate]="notFoundTemplate">                                 
          </ng-autocomplete>
           
          <ng-template #itemTemplate let-item>
            <a [innerHTML]="item.name"></a>
          </ng-template>
           
          <ng-template #notFoundTemplate let-notFound>
            <div>Машина не нейдена</div>
          </ng-template>
        </div>

      </div>


      <div class="input-group mb-4">
        <label for="state">Модель</label>
        <select class="custom-select d-block w-100" id="model" [(ngModel)]="selectedModel" name="model" required>
          <option *ngFor="let item of model" [value]=item.value>{{item.name}}</option>
        </select>
        <div class="invalid-feedback">
          Пожалуйста, выберите модель авто
        </div>
      </div>

      <div class="input-group mb-4" *ngIf="type">
          <label for="country">Тип топлива</label>
          <select class="custom-select d-block w-100" [(ngModel)]="selectedFuel" id="fuel" name="fuel" required>
            <option *ngFor="let item of fuel; let i = index" [value]=item.value>{{item.name}}
            </option>
          </select>
          <div class="invalid-feedback">
            Пожалуйста, выберите тип топлива
          </div>
        </div>

      <div class="form-group mb-4">
        <label for="zip">Год выпуска</label>
        <input class="form-control" id="year" [(ngModel)]="selectedYear" name="year" minlength="4" maxlength="4"
          required #year="ngModel">

        <div *ngIf="year.dirty && invalidYear" [ngClass]="{'d-block': invalidYear}" class="invalid-feedback">
          Год выпуска не соответствует шаблону.
        </div>
      </div>

      <button type="submit" [disabled]="!searchForm.form.valid" class="btn btn-primary">Найти среднюю цену</button>
      <!-- <button type="reset" [disabled]="searchForm.form.toched" class="btn btn-primary">Сброс</button> -->
    </form>

  </div>
  <div class="col-md-3"> </div>

</div>